{"ast":null,"code":"import React,{useState,useContext}from'react';import{Box,Typography,TextField,Button,Paper,Alert,Stack,CircularProgress}from'@mui/material';import{useNavigate}from'react-router-dom';import LockOpenIcon from'@mui/icons-material/LockOpen';import{loginUser}from'../api';import{LoginContext}from'../App';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{userType}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const{setIsLoggedIn}=useContext(LoginContext);const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await loginUser({username,password});const user=response.data;// Kullanıcı bilgilerini localStorage'a kaydet\nlocalStorage.setItem('user',JSON.stringify(user));localStorage.setItem('isLoggedIn','true');// LoginContext'i güncelle\nsetIsLoggedIn(true);// Başarılı giriş sonrası anasayfaya yönlendir\nnavigate('/');}catch(error){var _error$response;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||'Giriş sırasında bir hata oluştu.');}finally{setLoading(false);}};const userTypeLabel=userType==='member'?'Üye':userType==='publisher'?'Yayınevi':'Admin';return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',background:\"linear-gradient(rgba(30,40,60,0.72), rgba(30,40,60,0.62)), url('/login-bg.jpg') center center/cover no-repeat fixed\",color:'#f7f4ed',py:6,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(Paper,{elevation:8,sx:{p:{xs:2,sm:4},width:'100%',maxWidth:400,borderRadius:4,boxShadow:6,bgcolor:'rgba(30,40,60,0.55)',backdropFilter:'blur(8px)',mx:'auto'},children:[/*#__PURE__*/_jsx(LockOpenIcon,{sx:{fontSize:48,color:'info.main',mb:1,mt:1}}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,sx:{background:'linear-gradient(90deg, #3a5ba0 0%, #4ecdc4 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',fontWeight:800,letterSpacing:'0.04em',mb:1},children:[userTypeLabel,\" Giri\\u015Fi\"]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2,width:'100%'},children:error}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,style:{width:'100%'},children:/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(TextField,{label:\"Kullan\\u0131c\\u0131 Ad\\u0131\",variant:\"outlined\",fullWidth:true,value:username,onChange:e=>setUsername(e.target.value),required:true,disabled:loading,sx:{bgcolor:'rgba(255,255,255,0.7)',borderRadius:2}}),/*#__PURE__*/_jsx(TextField,{label:\"\\u015Eifre\",type:\"password\",variant:\"outlined\",fullWidth:true,value:password,onChange:e=>setPassword(e.target.value),required:true,disabled:loading,sx:{bgcolor:'rgba(255,255,255,0.7)',borderRadius:2}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:loading,sx:{py:1.3,fontWeight:700,fontSize:17,borderRadius:3,boxShadow:'0 2px 12px 0 #4ecdc422'},children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24,color:\"inherit\"}):'Giriş Yap'})]})})]})});};export default Login;","map":{"version":3,"names":["React","useState","useContext","Box","Typography","TextField","Button","Paper","Alert","Stack","CircularProgress","useNavigate","LockOpenIcon","loginUser","LoginContext","jsx","_jsx","jsxs","_jsxs","Login","_ref","userType","username","setUsername","password","setPassword","error","setError","loading","setLoading","navigate","setIsLoggedIn","handleSubmit","e","preventDefault","response","user","data","localStorage","setItem","JSON","stringify","_error$response","userTypeLabel","sx","minHeight","background","color","py","display","alignItems","justifyContent","children","elevation","p","xs","sm","width","maxWidth","borderRadius","boxShadow","bgcolor","backdropFilter","mx","fontSize","mb","mt","variant","align","gutterBottom","WebkitBackgroundClip","WebkitTextFillColor","fontWeight","letterSpacing","severity","onSubmit","style","spacing","label","fullWidth","value","onChange","target","required","disabled","type","size"],"sources":["C:/Users/Yusuf SEDAY/Desktop/KentYazilim/kutuphane-frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { Box, Typography, TextField, Button, Paper, Alert, Stack, CircularProgress } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport LockOpenIcon from '@mui/icons-material/LockOpen';\r\nimport { loginUser } from '../api';\r\nimport { LoginContext } from '../App';\r\n\r\nconst Login = ({ userType }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n  const { setIsLoggedIn } = useContext(LoginContext);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await loginUser({ username, password });\r\n      const user = response.data;\r\n      \r\n      // Kullanıcı bilgilerini localStorage'a kaydet\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      localStorage.setItem('isLoggedIn', 'true');\r\n      \r\n      // LoginContext'i güncelle\r\n      setIsLoggedIn(true);\r\n      \r\n      // Başarılı giriş sonrası anasayfaya yönlendir\r\n      navigate('/');\r\n      \r\n    } catch (error) {\r\n      setError(error.response?.data || 'Giriş sırasında bir hata oluştu.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const userTypeLabel = userType === 'member' ? 'Üye' : userType === 'publisher' ? 'Yayınevi' : 'Admin';\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        minHeight: '100vh',\r\n        background: \"linear-gradient(rgba(30,40,60,0.72), rgba(30,40,60,0.62)), url('/login-bg.jpg') center center/cover no-repeat fixed\",\r\n        color: '#f7f4ed',\r\n        py: 6,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n      }}\r\n    >\r\n      <Paper elevation={8} sx={{\r\n        p: { xs: 2, sm: 4 },\r\n        width: '100%',\r\n        maxWidth: 400,\r\n        borderRadius: 4,\r\n        boxShadow: 6,\r\n        bgcolor: 'rgba(30,40,60,0.55)',\r\n        backdropFilter: 'blur(8px)',\r\n        mx: 'auto',\r\n      }}>\r\n        <LockOpenIcon sx={{ fontSize: 48, color: 'info.main', mb: 1, mt: 1 }} />\r\n        <Typography\r\n          variant=\"h4\"\r\n          align=\"center\"\r\n          gutterBottom\r\n          sx={{\r\n            background: 'linear-gradient(90deg, #3a5ba0 0%, #4ecdc4 100%)',\r\n            WebkitBackgroundClip: 'text',\r\n            WebkitTextFillColor: 'transparent',\r\n            fontWeight: 800,\r\n            letterSpacing: '0.04em',\r\n            mb: 1,\r\n          }}\r\n        >\r\n          {userTypeLabel} Girişi\r\n        </Typography>\r\n        {error && <Alert severity=\"error\" sx={{ mb: 2, width: '100%' }}>{error}</Alert>}\r\n        <form onSubmit={handleSubmit} style={{ width: '100%' }}>\r\n          <Stack spacing={2}>\r\n            <TextField\r\n              label=\"Kullanıcı Adı\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              value={username}\r\n              onChange={e => setUsername(e.target.value)}\r\n              required\r\n              disabled={loading}\r\n              sx={{ bgcolor: 'rgba(255,255,255,0.7)', borderRadius: 2 }}\r\n            />\r\n            <TextField\r\n              label=\"Şifre\"\r\n              type=\"password\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              value={password}\r\n              onChange={e => setPassword(e.target.value)}\r\n              required\r\n              disabled={loading}\r\n              sx={{ bgcolor: 'rgba(255,255,255,0.7)', borderRadius: 2 }}\r\n            />\r\n            <Button \r\n              type=\"submit\" \r\n              variant=\"contained\" \r\n              color=\"primary\" \r\n              fullWidth \r\n              disabled={loading}\r\n              sx={{ \r\n                py: 1.3, \r\n                fontWeight: 700, \r\n                fontSize: 17, \r\n                borderRadius: 3, \r\n                boxShadow: '0 2px 12px 0 #4ecdc422' \r\n              }}\r\n            >\r\n              {loading ? <CircularProgress size={24} color=\"inherit\" /> : 'Giriş Yap'}\r\n            </Button>\r\n          </Stack>\r\n        </form>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Login; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}